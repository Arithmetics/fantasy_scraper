require 'sinatra'
require 'sinatra/reloader'
require './scripts/player_stats.rb'
require 'pp'


te_links = ["http://www.fftoday.com/stats/players/15500/Jerell_Adams", "http://www.fftoday.com/stats/players/12338/Dwayne_Allen", "http://www.fftoday.com/stats/players/14108/Jace_Amaro", "http://www.fftoday.com/stats/players/15108/Rory_Busta_Anderson", "http://www.fftoday.com/stats/players/14757/Stephen_Anderson", "http://www.fftoday.com/stats/players/12095/David_Ausberry", "http://www.fftoday.com/stats/players/15113/Kennard_Backman", "http://www.fftoday.com/stats/players/2890/Gary_Barnidge", "http://www.fftoday.com/stats/players/15116/Blake_Bell", "http://www.fftoday.com/stats/players/2892/Martellus_Bennett", "http://www.fftoday.com/stats/players/14694/EJ_Bibbs", "http://www.fftoday.com/stats/players/15043/Brandon_Bostick", "http://www.fftoday.com/stats/players/14797/Braedon_Bowman", "http://www.fftoday.com/stats/players/15120/Nick_Boyle", "http://www.fftoday.com/stats/players/14537/Brett_Brackett", "http://www.fftoday.com/stats/players/14543/Cameron_Brate", "http://www.fftoday.com/stats/players/14803/Ben_Braunecker", "http://www.fftoday.com/stats/players/12153/Richie_Brockel", "http://www.fftoday.com/stats/players/14695/Daniel_Brown", "http://www.fftoday.com/stats/players/14468/Trey_Burton", "http://www.fftoday.com/stats/players/15828/Jake_Butt", "http://www.fftoday.com/stats/players/11956/Jordan_Cameron", "http://www.fftoday.com/stats/players/14438/Derek_Carrier", "http://www.fftoday.com/stats/players/11152/James_Casey", "http://www.fftoday.com/stats/players/2803/Brent_Celek", "http://www.fftoday.com/stats/players/14551/Garrett_Celek", "http://www.fftoday.com/stats/players/2793/Scott_Chandler", "http://www.fftoday.com/stats/players/12390/Orson_Charles", "http://www.fftoday.com/stats/players/15131/Gerald_Christian", "http://www.fftoday.com/stats/players/12028/Charles_Clay", "http://www.fftoday.com/stats/players/14558/Asante_Cleveland", "http://www.fftoday.com/stats/players/11098/Chase_Coffman", "http://www.fftoday.com/stats/players/11089/Jared_Cook", "http://www.fftoday.com/stats/players/11692/Tom_Crabtree", "http://www.fftoday.com/stats/players/14793/Alan_Cross", "http://www.fftoday.com/stats/players/11723/Jeff_Cumberland", "http://www.fftoday.com/stats/players/14611/Jerome_Cunningham", "http://www.fftoday.com/stats/players/13080/Justice_Cunningham", "http://www.fftoday.com/stats/players/2637/Owen_Daniels", "http://www.fftoday.com/stats/players/2906/Kellen_Davis", "http://www.fftoday.com/stats/players/2606/Vernon_Davis", "http://www.fftoday.com/stats/players/14549/Anthony_Denham", "http://www.fftoday.com/stats/players/15153/AJ_Derby", "http://www.fftoday.com/stats/players/15562/Seth_Devalve", "http://www.fftoday.com/stats/players/11637/Dorin_Dickerson", "http://www.fftoday.com/stats/players/11480/Ed_Dickson", "http://www.fftoday.com/stats/players/14397/Larry_Donnell", "http://www.fftoday.com/stats/players/13094/Jack_Doyle", "http://www.fftoday.com/stats/players/11643/Jim_Dray", "http://www.fftoday.com/stats/players/15572/Thomas_Duarte", "http://www.fftoday.com/stats/players/14165/Eric_Ebron", "http://www.fftoday.com/stats/players/12352/Michael_Egnew", "http://www.fftoday.com/stats/players/13101/Tyler_Eifert", "http://www.fftoday.com/stats/players/14853/Alex_Ellis", "http://www.fftoday.com/stats/players/12402/Rhett_Ellison", "http://www.fftoday.com/stats/players/15862/Evan_Engram", "http://www.fftoday.com/stats/players/13104/Zach_Ertz", "http://www.fftoday.com/stats/players/13105/Gavin_Escobar", "http://www.fftoday.com/stats/players/15865/Gerald_Everett", "http://www.fftoday.com/stats/players/2620/Anthony_Fasano", "http://www.fftoday.com/stats/players/13108/Joseph_Fauria", "http://www.fftoday.com/stats/players/14386/Darren_Fells", "http://www.fftoday.com/stats/players/14177/CJ_Fiedorowicz", "http://www.fftoday.com/stats/players/12309/Coby_Fleener", "http://www.fftoday.com/stats/players/14470/Chase_Ford", "http://www.fftoday.com/stats/players/2373/Antonio_Gates", "http://www.fftoday.com/stats/players/15587/Rico_Gathers", "http://www.fftoday.com/stats/players/14195/Crockett_Gillmore", "http://www.fftoday.com/stats/players/12035/Richard_Gordon", "http://www.fftoday.com/stats/players/13136/Chris_Gragg", "http://www.fftoday.com/stats/players/11528/Garrett_Graham", "http://www.fftoday.com/stats/players/11505/Jimmy_Graham", "http://www.fftoday.com/stats/players/13139/MarQueis_Gray", "http://www.fftoday.com/stats/players/12384/Ladarius_Green", "http://www.fftoday.com/stats/players/12058/Virgil_Green", "http://www.fftoday.com/stats/players/11431/Jermaine_Gresham", "http://www.fftoday.com/stats/players/15047/Ryan_Griffin", "http://www.fftoday.com/stats/players/14775/Xavier_Grimble", "http://www.fftoday.com/stats/players/11452/Rob_Gronkowski", "http://www.fftoday.com/stats/players/14810/Connor_Hamlett", "http://www.fftoday.com/stats/players/14809/JeRon_Hamm", "http://www.fftoday.com/stats/players/12460/James_Hanna", "http://www.fftoday.com/stats/players/11535/Clay_Harbor", "http://www.fftoday.com/stats/players/14407/Cory_Harkey", "http://www.fftoday.com/stats/players/13149/Demetrius_Harris", "http://www.fftoday.com/stats/players/14492/Cooper_Helfet", "http://www.fftoday.com/stats/players/15601/Temarrick_Hemingway", "http://www.fftoday.com/stats/players/15603/Hunter_Henry", "http://www.fftoday.com/stats/players/15208/Jeff_Heuerman", "http://www.fftoday.com/stats/players/14467/Ryan_Hewitt", "http://www.fftoday.com/stats/players/15605/Tyler_Higbee", "http://www.fftoday.com/stats/players/14427/Josh_Hill", "http://www.fftoday.com/stats/players/15897/Bucky_Hodges", "http://www.fftoday.com/stats/players/11542/Michael_Hoomanawanui", "http://www.fftoday.com/stats/players/15610/Austin_Hooper", "http://www.fftoday.com/stats/players/11923/Robert_Housler", "http://www.fftoday.com/stats/players/15904/OJ_Howard", "http://www.fftoday.com/stats/players/14474/Nic_Jacobs", "http://www.fftoday.com/stats/players/15218/Jesse_James", "http://www.fftoday.com/stats/players/13184/DC_Jefferson", "http://www.fftoday.com/stats/players/14459/Marcel_Jensen", "http://www.fftoday.com/stats/players/11241/David_Johnson", "http://www.fftoday.com/stats/players/12869/Dominique_Jones", "http://www.fftoday.com/stats/players/13214/Nick_Kasa", "http://www.fftoday.com/stats/players/13217/Travis_Kelce", "http://www.fftoday.com/stats/players/11901/Lance_Kendricks", "http://www.fftoday.com/stats/players/15929/George_Kittle", "http://www.fftoday.com/stats/players/15232/Ben_Koyack", "http://www.fftoday.com/stats/players/14880/Henry_KriegerCoble", "http://www.fftoday.com/stats/players/15233/Tyler_Kroft", "http://www.fftoday.com/stats/players/14725/Matt_LaCosse", "http://www.fftoday.com/stats/players/14646/Khari_Lee", "http://www.fftoday.com/stats/players/15940/Jordan_Leggett", "http://www.fftoday.com/stats/players/14883/Matt_Lengel", "http://www.fftoday.com/stats/players/14400/Brian_Leonhardt", "http://www.fftoday.com/stats/players/2612/Marcedes_Lewis", "http://www.fftoday.com/stats/players/14243/Arthur_Lynch", "http://www.fftoday.com/stats/players/14877/Chris_Manhertz", "http://www.fftoday.com/stats/players/11595/Anthony_McCoy", "http://www.fftoday.com/stats/players/13269/Vance_McDonald", "http://www.fftoday.com/stats/players/15037/Sean_McGrath", "http://www.fftoday.com/stats/players/11180/Zach_Miller", "http://www.fftoday.com/stats/players/11503/Tony_Moeaki", "http://www.fftoday.com/stats/players/14804/Ifeanyi_Momah", "http://www.fftoday.com/stats/players/15664/David_Morgan", "http://www.fftoday.com/stats/players/11248/Cameron_Morrah", "http://www.fftoday.com/stats/players/11292/Matthew_Mulligan", "http://www.fftoday.com/stats/players/11202/Brandon_Myers", "http://www.fftoday.com/stats/players/14273/Troy_Niklas", "http://www.fftoday.com/stats/players/15971/David_Njoku", "http://www.fftoday.com/stats/players/15268/Nick_OLeary", "http://www.fftoday.com/stats/players/15270/James_OShaughnessy", "http://www.fftoday.com/stats/players/2761/Greg_Olsen", "http://www.fftoday.com/stats/players/11672/Michael_Palmer", "http://www.fftoday.com/stats/players/14680/Brian_Parker", "http://www.fftoday.com/stats/players/11184/Bear_Pascoe", "http://www.fftoday.com/stats/players/12009/Niles_Paul", "http://www.fftoday.com/stats/players/11740/Logan_Paulsen", "http://www.fftoday.com/stats/players/12514/David_Paulson", "http://www.fftoday.com/stats/players/14657/Justin_Perillo", "http://www.fftoday.com/stats/players/14840/Joshua_Perkins", "http://www.fftoday.com/stats/players/11020/Brandon_Pettigrew", "http://www.fftoday.com/stats/players/11208/John_Phillips", "http://www.fftoday.com/stats/players/11524/Dennis_Pitta", "http://www.fftoday.com/stats/players/15283/MyCole_Pruitt", "http://www.fftoday.com/stats/players/11564/Andrew_Quarless", "http://www.fftoday.com/stats/players/13325/Jordan_Reed", "http://www.fftoday.com/stats/players/13336/Mychal_Rivera", "http://www.fftoday.com/stats/players/15988/Michael_Roberts", "http://www.fftoday.com/stats/players/12401/Adrien_Robinson", "http://www.fftoday.com/stats/players/14302/Richard_Rodgers", "http://www.fftoday.com/stats/players/12385/Evan_Rodriguez", "http://www.fftoday.com/stats/players/11897/Kyle_Rudolph", "http://www.fftoday.com/stats/players/15699/Beau_Sandland", "http://www.fftoday.com/stats/players/15995/Eric_Saubert", "http://www.fftoday.com/stats/players/15996/Mason_Schreck", "http://www.fftoday.com/stats/players/14311/Austin_SeferianJenkins", "http://www.fftoday.com/stats/players/15999/Adam_Shaheen", "http://www.fftoday.com/stats/players/11624/Mickey_Shuler", "http://www.fftoday.com/stats/players/14706/Scott_Simonson", "http://www.fftoday.com/stats/players/13359/Dion_Sims", "http://www.fftoday.com/stats/players/16003/Jonnu_Smith", "http://www.fftoday.com/stats/players/12013/Lee_Smith", "http://www.fftoday.com/stats/players/2779/Matt_Spaeth", "http://www.fftoday.com/stats/players/16006/Jeremy_Sprinkle", "http://www.fftoday.com/stats/players/15323/Neal_Sterling", "http://www.fftoday.com/stats/players/11958/Luke_Stocker", "http://www.fftoday.com/stats/players/13380/Jake_Stoneburner", "http://www.fftoday.com/stats/players/13383/Zach_Sudfeld", "http://www.fftoday.com/stats/players/14520/Phillip_Supernaw", "http://www.fftoday.com/stats/players/15326/Geoff_Swaim", "http://www.fftoday.com/stats/players/14760/Erik_Swoope", "http://www.fftoday.com/stats/players/2970/Jacob_Tamme", "http://www.fftoday.com/stats/players/12072/Ryan_Taylor", "http://www.fftoday.com/stats/players/15329/Randall_Telfer", "http://www.fftoday.com/stats/players/11983/Julius_Thomas", "http://www.fftoday.com/stats/players/14335/Logan_Thomas", "http://www.fftoday.com/stats/players/14508/Jordan_Thompson", "http://www.fftoday.com/stats/players/12419/Taylor_Thompson", "http://www.fftoday.com/stats/players/14878/DJ_Tialavea", "http://www.fftoday.com/stats/players/13407/Levine_Toilolo", "http://www.fftoday.com/stats/players/14768/Ross_Travis", "http://www.fftoday.com/stats/players/14637/Will_Tye", "http://www.fftoday.com/stats/players/15336/CJ_Uzomah", "http://www.fftoday.com/stats/players/14808/Hakeem_Valles", "http://www.fftoday.com/stats/players/15730/Nick_Vannett", "http://www.fftoday.com/stats/players/15338/Clive_Walford", "http://www.fftoday.com/stats/players/2663/Delanie_Walker", "http://www.fftoday.com/stats/players/15340/Darren_Waller", "http://www.fftoday.com/stats/players/3085/Ben_Watson", "http://www.fftoday.com/stats/players/14743/Cole_Wick", "http://www.fftoday.com/stats/players/14486/Brandon_Williams", "http://www.fftoday.com/stats/players/11995/DJ_Williams", "http://www.fftoday.com/stats/players/15349/Maxx_Williams", "http://www.fftoday.com/stats/players/13440/Michael_Williams", "http://www.fftoday.com/stats/players/13532/Luke_Willson", "http://www.fftoday.com/stats/players/2272/Jason_Witten", "http://www.fftoday.com/stats/players/15040/Tim_Wright"] 
tes = []


te_links.each do |link|
  gather_te_stats(link, tes)
end




get '/' do
   selected_player = params["player"]
   year = params["year"]
   x = find_player(selected_player, tes)
   stats = x.seasons[year.to_i].targets
   name = x.name + " in " + year.to_s
   erb :index, :locals => {:stats => stats, :name => name}

end



x = tes.each do |te|
  puts te.name
  te.seasons.each do |year, season|
    if season.games > 8
      puts season.receiving_yards
    end
  end 
end 


puts "#{te.name} #{season.year} #{season.age} #{season.recieving_yards}"